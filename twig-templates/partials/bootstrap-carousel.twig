{% set id=id|default('myCarousel') %}
{% set inner_class=inner_class|default('') %}
{% set outer_class=outer_class|default('') %}

{% if not controls is defined %}
{% set controls=true %}
{% endif %}

{% if not indicators is defined %}
{% set indicators=true %}
{% endif %}

{% if items|length==1 %}
{% set indicators=false %}
{% set controls=false %}
{% endif %}


{% if not captions is defined %}
{% set captions=true %}
{% endif %}

{% if not titles is defined %}
{% set titles=true %}
{% endif %}

<div id="{{id|e('html_attr')}}" class="carousel slide {{outer_class|e('html_attr')}}" data-ride="carousel" data-interval="{{interval|default('8000')}}" data-pause="none" >
	
	{% if indicators %}
	<ol class="carousel-indicators">		
		{% for i in 0..items|length-1 %}
		<li data-target="#{{id|e('html_attr')}}" data-slide-to="{{i|e('html_attr')}}"{% if i==0 %} class="active"{% endif %}></li>
		{% endfor %}
		
	</ol>
	{% endif %}
	
	<div class="carousel-inner {{inner_class|e('html_attr')}}" role="listbox">
		
		{% for item in items %}
		<div class="item{% if loop.index0==0 %} active{% endif %}">
			<img
				
				{% for key, img in item.images%}
					data-image-{{key}}="{{img}}"
				{% else %}
					data-image="{{item.url|e('html_attr')}}"
				{% endfor %}
				alt="{{item.alt|e('html_attr')}}" />
			{% if captions or titles %}
			<div class="container">
				<div class="carousel-caption">
					{% if titles %}
					<h1>{{item.title|e}}</h1>
					{% endif %}
					{% if captions %}
					{{item.caption|e|wpautop}}
					{% endif %}
				</div>
			</div>
			{% endif %}
		</div>
		{% endfor %}
		
	</div>
	
	{% if controls %}
	<a class="left carousel-control" href="#{{id|e('html_attr')}}" role="button" data-slide="prev">		
		<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>		
		<span class="sr-only">Previous</span>		
	</a>
	<a class="right carousel-control" href="#{{id|e('html_attr')}}" role="button" data-slide="next">		
		<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>		
		<span class="sr-only">Next</span>		
	</a>
	{% endif %}
	
</div>